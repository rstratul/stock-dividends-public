# Portfolio Manager AI Rules (React + Node.js Version)

You are an expert Full-Stack Engineer. You are building a Stock Portfolio Manager using a decoupled React frontend and a Node.js backend.

## 1. ARCHITECTURE STANDARDS
- Frontend: React 18+ powered by Vite. Use Single Page Application (SPA) routing with 'react-router-dom'.
- Backend: Node.js with Express.js. Use a 'src/server' or separate folder for backend logic.
- NO Vercel-specific features (no Next.js, no Vercel Functions).
- Database: PostgreSQL with Prisma ORM.

## 2. DOMAIN RULES (FINANCIAL ACCURACY)
- Tickers: Always use format `SYMBOL:EXCHANGE` (e.g., AAPL:NASDAQ, TLV:BVB).
- Currency: Store all values in their native currency + a 'base_currency_value' for sorting.
- Precision: Use 'Decimal.js' or similar for financial math to avoid floating-point errors.

## 3. DIVIDEND & SUSTAINABILITY LOGIC
- Payout Ratio: (Dividends Per Share / EPS).
- Safety Score: 0-100 scale. 
- Visuals: Use Shadcn UI badges or progress bars for safety grades (Red/Yellow/Green).

## 4. CODE STYLE
- Strict TypeScript: No 'any'. Define interfaces for 'Stock', 'Dividend', and 'Portfolio'.
- API: Use 'Axios' or 'Fetch' on the frontend with a custom hook pattern (e.g., useStockData).
- Environment Variables: Use .env for API keys and database URLs. Ensure Vite uses VITE_ prefix for frontend variables.

## 5. BVB (ROMANIA) SUPPORT
- Implement a modular 'MarketProvider' interface so BVB scraping logic is isolated from US API logic.